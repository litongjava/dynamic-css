# dynamic-css
动态 响应 CSS内容

## 介绍

本系统通过解析浏览器的 `User-Agent`，自动判断请求设备的类型（如移动端或桌面端），并动态返回对应的 CSS 样式文件。如果请求的 CSS 文件不存在，系统将自动创建该文件，并写入默认的内容。该功能可用于提供针对不同设备类型优化的样式，以提升用户体验。

## 系统功能

- **动态识别设备类型**：使用 `User-Agent` 信息识别设备类型（移动端或桌面端）。
- **返回对应的 CSS 样式**：根据设备类型返回移动端或桌面端的 CSS 文件。
- **自动创建缺失的 CSS 文件**：在请求的 CSS 文件不存在时，自动创建文件并写入默认内容。

## 安装与配置

1. **克隆代码库**  
   使用以下命令克隆本系统代码库到本地：

   ```bash
   git clone https://github.com/litongjava/dynamic-css.git
   ```

2. **配置依赖项**  
   确保项目的依赖项已正确安装。本项目依赖于以下库：

   - `tio-boot`
   - `tio-utils`

   请根据项目结构和开发环境，使用 Maven 或 Gradle 进行依赖项的安装与配置。

3. **运行系统**  
   配置好依赖项后，即可通过 IDE 或命令行运行项目：

   ```bash
   mvn spring-boot:run
   ```

4. **访问系统**  
   系统默认运行在 `localhost:8000`，可通过以下示例 URL 访问并测试系统功能：

   ```url
   http://localhost:8000/css/index.css
   ```

## 使用方法

### 请求 CSS 文件

请求路径格式如下：

```url
http://<server-host>:<port>/css/<filename>.css
```

- **请求参数说明**：
  - `<server-host>`：服务器地址（默认为 `localhost`）。
  - `<port>`：服务器端口号（默认为 `8000`）。
  - `<filename>`：CSS 文件名。

### 系统自动判断并返回对应的 CSS

- **桌面端**：请求来自桌面设备时，系统会返回位于 `css/pc/` 目录下的 CSS 文件。
- **移动端**：请求来自移动设备时，系统会返回位于 `css/mobile/` 目录下的 CSS 文件。

### 自动创建 CSS 文件

如果请求的 CSS 文件不存在，系统将自动在对应的目录下创建该文件，并写入默认的内容：

```css
/* Default CSS content */
```

用户可以根据需要修改此默认内容，编写符合项目需求的样式。

## 自定义开发

### 修改默认内容

用户可以通过修改 `CSSController.java` 中的代码，改变自动创建 CSS 文件时的默认内容：

```java
Files.write(file.toPath(), "/* Your Default CSS content */".getBytes(StandardCharsets.UTF_8));
```

### 扩展功能

您可以根据需要扩展系统功能，如：

- 增加对更多设备类型的支持。
- 动态返回不同的 CSS 片段以适配复杂的布局。
- 添加缓存机制以提高性能。

## 常见问题

### 文件无法创建或读取？

- 检查文件权限，确保服务器有权限在目标目录下创建和读取文件。
- 检查文件路径，确保路径正确且没有拼写错误。

### 请求没有返回正确的 CSS？

- 确保请求的 URL 是有效的，并且服务器已正确运行。
- 检查 `User-Agent` 解析是否正确，必要时可以在控制台打印 `User-Agent` 信息进行调试。